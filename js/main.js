(function () {
  'use strict';
  var appartment = [
    [
      {
        'name': 201,
        'plan': 'j-1x1-ada',
        'area': 587,
        'desc': ''
      },
      {
        'name': 202,
        'plan': 'a-1x1',
        'area': 634,
        'desc': ''
      },
      {
        'name': 203,
        'plan': 'b-1x1+den',
        'area': 714,
        'desc': ''
      },
      {
        'name': 204,
        'plan': 'c-1x1',
        'area': 556,
        'desc': ''
      },
      {
        'name': 205,
        'plan': 'd-1x1',
        'area': 542,
        'desc': ''
      },
      {
        'name': 206,
        'plan': 'k-2x2-ada',
        'area': 1038,
        'desc': ''
      },
      {
        'name': 207,
        'plan': 'l-1x1+den',
        'area': 981,
        'desc': ''
      }], [
      {
        'name': 301,
        'plan': 'j-1x1-ada',
        'area': 587,
        'desc': ''
      },
      {
        'name': 302,
        'plan': 'a-1x1',
        'area': 634,
        'desc': ''
      },
      {
        'name': 303,
        'plan': 'b-1x1+den',
        'area': 714,
        'desc': ''
      },
      {
        'name': 304,
        'plan': 'c-1x1',
        'area': 556,
        'desc': ''
      },
      {
        'name': 305,
        'plan': 'd-1x1',
        'area': 542,
        'desc': ''
      },
      {
        'name': 306,
        'plan': 'e-1x1+den',
        'area': 682,
        'desc': ''
      },
      {
        'name': 307,
        'plan': 'f-2x2',
        'area': 891,
        'desc': ''
      },
      {
        'name': 308,
        'plan': 'g-1x1+den',
        'area': 734,
        'desc': ''
      },
      {
        'name': 309,
        'plan': 'h-1x1',
        'area': 426,
        'desc': ''
      }], [
      {
        'name': 401,
        'plan': 'j-1x1',
        'area': 587,
        'desc': ''
      },
      {
        'name': 402,
        'plan': 'a-1x1',
        'area': 634,
        'desc': ''
      },
      {
        'name': 403,
        'plan': 'b-1x1+den',
        'area': 714,
        'desc': ''
      },
      {
        'name': 404,
        'plan': 'c-1x1',
        'area': 556,
        'desc': ''
      },
      {
        'name': 405,
        'plan': 'd-1x1',
        'area': 542,
        'desc': ''
      },
      {
        'name': 406,
        'plan': 'e-1x1+den',
        'area': 682,
        'desc': ''
      },
      {
        'name': 407,
        'plan': 'f-2x2',
        'area': 891,
        'desc': ''
      },
      {
        'name': 408,
        'plan': 'g-1x1+den',
        'area': 734,
        'desc': ''
      },
      {
        'name': 409,
        'plan': 'h-1x1',
        'area': 426,
        'desc': ''
      }], [
      {
        'name': 501,
        'plan': 'j-1x1',
        'area': 587,
        'desc': ''
      },
      {
        'name': 502,
        'plan': 'a-1x1',
        'area': 634,
        'desc': ''
      },
      {
        'name': 503,
        'plan': 'b-1x1+den',
        'area': 714,
        'desc': ''
      },
      {
        'name': 504,
        'plan': 'c-1x1',
        'area': 556,
        'desc': ''
      },
      {
        'name': 505,
        'plan': 'd-1x1',
        'area': 542,
        'desc': ''
      },
      {
        'name': 506,
        'plan': 'e-1x1+den',
        'area': 682,
        'desc': ''
      },
      {
        'name': 507,
        'plan': 'f-2x2',
        'area': 891,
        'desc': ''
      },
      {
        'name': 508,
        'plan': 'g-1x1+den',
        'area': 734,
        'desc': ''
      },
      {
        'name': 509,
        'plan': 'h-1x1',
        'area': 426,
        'desc': ''
      }], [
      {
        'name': 601,
        'plan': 'j-1x1',
        'area': 587,
        'desc': ''
      },
      {
        'name': 602,
        'plan': 'a-1x1',
        'area': 634,
        'desc': ''
      },
      {
        'name': 603,
        'plan': 'b-1x1+den',
        'area': 714,
        'desc': ''
      },
      {
        'name': 604,
        'plan': 'c-1x1',
        'area': 556,
        'desc': ''
      },
      {
        'name': 605,
        'plan': 'd-1x1',
        'area': 542,
        'desc': ''
      },
      {
        'name': 606,
        'plan': 'e-1x1+den',
        'area': 682,
        'desc': ''
      },
      {
        'name': 607,
        'plan': 'f-2x2',
        'area': 891,
        'desc': ''
      },
      {
        'name': 608,
        'plan': 'g-1x1+den',
        'area': 734,
        'desc': ''
      },
      {
        'name': 609,
        'plan': 'h-1x1',
        'area': 426,
        'desc': ''
      }], [
      {
        'name': 701,
        'plan': 'j-1x1',
        'area': 587,
        'desc': ''
      },
      {
        'name': 702,
        'plan': 'a-1x1',
        'area': 634,
        'desc': ''
      },
      {
        'name': 703,
        'plan': 'b-1x1+den -ada',
        'area': 714,
        'desc': ''
      },
      {
        'name': 704,
        'plan': 'c-1x1',
        'area': 556,
        'desc': ''
      },
      {
        'name': 705,
        'plan': 'd-1x1',
        'area': 542,
        'desc': ''
      },
      {
        'name': 706,
        'plan': 'e-1x1+den',
        'area': 682,
        'desc': ''
      },
      {
        'name': 707,
        'plan': 'f-2x2',
        'area': 891,
        'desc': ''
      },
      {
        'name': 708,
        'plan': 'g-1x1+den',
        'area': 734,
        'desc': ''
      },
      {
        'name': 709,
        'plan': 'h-1x1',
        'area': 426,
        'desc': ''
      }], [
      {
        'name': 801,
        'plan': 'j-1x1',
        'area': 587,
        'desc': ''
      },
      {
        'name': 802,
        'plan': 'a-1x1',
        'area': 634,
        'desc': ''
      },
      {
        'name': 803,
        'plan': 'b-1x1+den',
        'area': 714,
        'desc': ''
      },
      {
        'name': 804,
        'plan': 'c-1x1',
        'area': 556,
        'desc': ''
      },
      {
        'name': 805,
        'plan': 'd-1x1',
        'area': 542,
        'desc': ''
      },
      {
        'name': 806,
        'plan': 'e-1x1+den',
        'area': 682,
        'desc': ''
      },
      {
        'name': 807,
        'plan': 'f-2x2',
        'area': 891,
        'desc': ''
      },
      {
        'name': 808,
        'plan': 'g-1x1+den',
        'area': 734,
        'desc': ''
      },
      {
        'name': 809,
        'plan': 'h-1x1',
        'area': 426,
        'desc': ''
      },
      {
        'name': 901,
        'plan': 'j-1x1',
        'area': 587,
        'desc': ''
      }], [
      {
        'name': 902,
        'plan': 'a-1x1',
        'area': 634,
        'desc': ''
      },
      {
        'name': 903,
        'plan': 'b-1x1+den',
        'area': 714,
        'desc': ''
      },
      {
        'name': 904,
        'plan': 'c-1x1',
        'area': 556,
        'desc': ''
      },
      {
        'name': 905,
        'plan': 'd-1x1',
        'area': 542,
        'desc': ''
      },
      {
        'name': 906,
        'plan': 'e-1x1+den',
        'area': 682,
        'desc': ''
      },
      {
        'name': 907,
        'plan': 'f-2x2',
        'area': 891,
        'desc': ''
      },
      {
        'name': 908,
        'plan': 'g-1x1+den',
        'area': 734,
        'desc': ''
      },
      {
        'name': 909,
        'plan': 'h-1x1',
        'area': 426,
        'desc': ''
      }], [
      {
        'name': 1001,
        'plan': 'j-1x1',
        'area': 587,
        'desc': ''
      },
      {
        'name': 1002,
        'plan': 'a-1x1',
        'area': 634,
        'desc': ''
      },
      {
        'name': 1003,
        'plan': 'b-1x1+den',
        'area': 714,
        'desc': ''
      },
      {
        'name': 1004,
        'plan': 'c-1x1',
        'area': 556,
        'desc': ''
      },
      {
        'name': 1005,
        'plan': 'd-1x1',
        'area': 542,
        'desc': ''
      },
      {
        'name': 1006,
        'plan': 'e-1x1+den',
        'area': 682,
        'desc': ''
      },
      {
        'name': 1007,
        'plan': 'f-2x2',
        'area': 891,
        'desc': ''
      },
      {
        'name': 1008,
        'plan': 'g-1x1+den',
        'area': 734,
        'desc': ''
      },
      {
        'name': 1009,
        'plan': 'h-1x1',
        'area': 426,
        'desc': ''
      }], [
      {
        'name': 1101,
        'plan': 'j-1x1-ada',
        'area': 587,
        'desc': ''
      },
      {
        'name': 1102,
        'plan': 'a-1x1',
        'area': 634,
        'desc': ''
      },
      {
        'name': 1103,
        'plan': 'b-1x1+den',
        'area': 714,
        'desc': ''
      },
      {
        'name': 1104,
        'plan': 'c-1x1',
        'area': 556,
        'desc': ''
      },
      {
        'name': 1105,
        'plan': 'd-1x1',
        'area': 542,
        'desc': ''
      },
      {
        'name': 1106,
        'plan': 'e-1x1+den',
        'area': 682,
        'desc': ''
      },
      {
        'name': 1107,
        'plan': 'f-2x2',
        'area': 891,
        'desc': ''
      },
      {
        'name': 1108,
        'plan': 'g-1x1+den',
        'area': 734,
        'desc': ''
      },
      {
        'name': 1109,
        'plan': 'h-1x1',
        'area': 426,
        'desc': ''
      }], [
      {
        'name': 1201,
        'plan': 'penthouse-1-2x2+den',
        'area': '1,765',
        'desc': ''
      },
      {
        'name': 1202,
        'plan': 'penthouse-2-1x1.5',
        'area': 902,
        'desc': ''
      },
      {
        'name': 1203,
        'plan': 'penthouse-3-2x2',
        'area': '1,254',
        'desc': ''
      },
      {
        'name': 1204,
        'plan': 'penthouse-4-1x1.5',
        'area': 947,
        'desc': ''
      },
      {
        'name': 1205,
        'plan': 'penthouse-5-1x1.5',
        'area': 981,
        'desc': ''
      }]
  ];
  //207,308,408,408,608
  var filter = "View All";
  showfloor(0);
  jQuery("#floorplan-filters li a").on("click", function () {
    jQuery("#floorplan-filters li").removeClass('active');
    jQuery(this).parent().addClass('active');
    filter = jQuery(this).text();
    filterApt(filter);
  });
  function filterApt(filter) {
    if(!filter){
      filter = "View All";
    }
    var reg = '';
    if (filter === 'View All') {
          reg = /./;
    }
    if (filter === 'One Bedroom') {
      reg = /[A-z]-1x.((-ada)?)$/; 
    }
    if (filter === 'One Bedroom Den') {
      reg = /den/; 
    }
    if (filter === 'Two Bedroom') {
      reg = /[A-z]-2x.$/; 
    }
    if (filter === 'Penthouse') {
      reg = /penthouse/; 
    }
    
    
    
    jQuery('#floorplannumber li').each(function(l){
      jQuery(this).removeClass('disabled');
      jQuery("#floorplannumber li").removeClass('active');
      jQuery(this).find( "a" ).removeClass('disabled');
      
      var cls = jQuery(this).attr('class').split(' ')[1];
      if(!reg.test(cls) && filter !== 'View All'){
        jQuery(this).addClass('disabled');
        jQuery(this).find( "a" ).addClass('disabled');
      }
      
    });
  }
  function showfloor(floorNum) {
    jQuery("#floors ul li").removeClass('active');
    jQuery(".floor-" + (floorNum + 2)).addClass('active');

    var floor = appartment[floorNum];
    var ul = jQuery('<ul id="floorplannumber">').addClass("nav nav-pills nav-stacked");
    for (var i = 0, l = floor.length; i < l; ++i) {
      ul.append('<li class="apt' + floor[i].name + ' ' + floor[i].plan + ' ' + floor[i].area + '"><a href="#apartment-detail">' + floor[i].name + "</a></li>");
    }
    jQuery('#building-floorplans').html('')
    jQuery("#building-floorplans").append(ul);
    filterApt(filter);


    jQuery("#floorplannumber li a").on("click", function () {
      if(jQuery(this).hasClass('disabled')){
        return;
      }

      jQuery("#floorplannumber li").removeClass('active');
      jQuery(this).parent().addClass('active');
      var parent = jQuery(jQuery(this).parent()[0]);
      var classes = parent.attr('class').split(' ');
      var name = classes[0].substring(3);
      var img = urlBase + '/images/' + classes[1] + '.png';
      var desc = jQuery('<ul>');
      if (classes[1].startsWith('penthouse')) {
        var beds = classes[1].substring(12, 13);
        var baths = classes[1].substring(14, 15);
        if (classes[1].includes('1.5')) {
          baths = '1.5';
        }
        desc.append('<li>penthouse</li>');
      } else {
        var beds = classes[1].substring(2, 3);
        var baths = classes[1].substring(4, 5);
      }
      if (parseInt(beds) === 1) {
        desc.append('<li>' + beds + ' bed</li>');
      } else {
        desc.append('<li>' + beds + ' beds </li>');
      }
      if (parseInt(baths) === 1) {
        desc.append('<li>' + baths + ' bath </li>');
      } else {
        desc.append('<li>' + baths + ' baths </li>');
      }

      if (classes[1].endsWith('den')) {
        desc.append('<li>den</li>');
      }
      desc.append('<li>' + classes[2] + ' sq ft</li>');

      jQuery('#apartment-detail div h2').text(name);
      jQuery('#apartment-detail div div').html('')
      jQuery("#apartment-detail div div").append(desc);
      jQuery('#apartment-image img').attr('src', img);
      jQuery('#apartment-image a').attr('href', img);
    });
    
    jQuery("#floorplannumber li a:first").click()
  }
  jQuery("#floors ul li").on("click", function () {
    var id = parseInt(jQuery(this).text(), 10) - 2;
    showfloor(id);
  });
  
  jQuery('.image-popup-vertical-fit').magnificPopup({
		type: 'image',
		closeOnContentClick: true,
		mainClass: 'mfp-img-mobile',
		image: {
			verticalFit: true
		}
	});

})();
